jQuery.fn.autosave=function(a){function c(a){var c=/^data\-(\w+)$/,d={};return d.value=a.value,d.name=a.name,b.each(a.attributes,function(a,b){c.test(b.nodeName)&&(d[c.exec(b.nodeName)[1]]=b.value)}),d}var b=jQuery;b.each(this,function(){var d=b(this),e={data:{},method:"POST",event:"change",debug:!1,type:"html",success:function(){},error:function(){},before:function(){}};a=b.extend(e,a),d.data("original-value",d.val());var f=c(this),g=f.event||a.event,h=f.type||a.type;d.on(g,function(d){var e=b(this);f.value=e.val(),f=b.extend(f,c(this));var g=f.url?f.url:a.url,g=f.method?f.method:a.method;return e.val()==e.data("original-value")?(d.preventDefault(),!1):(a.before&&a.before.call(this,e),a.debug?(console.log(f),d.preventDefault(),!1):(b.ajax({type:method,url:g,data:f,dataType:h,success:function(b){a.success(b,e)},error:function(b){a.error(b,e)}}),!0))})})}