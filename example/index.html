<!DOCTYPE HTML>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <title>jquery-autosave</title>
  <link rel="stylesheet" type="text/css" href="bootstrap3.custom.min.css" />
  <style>
    .example 
    {
        position: relative;
        margin: 15px 0 0;
        padding: 35px 10px 0;
        background-color: white;
        border: 1px solid #DDD;
        border-radius: 4px 4px 0 0;
    }
    pre{border-radius: 0 0 4px 4px;}
    
    .example::after
    {
        content: attr(data-content);
        position: absolute;
        top: -1px;
        left: -1px;
        padding: 3px 7px;
        font-size: 12px;
        font-weight: bold;
        background-color: whiteSmoke;
        border: 1px solid #DDD;
        color: #9DA0A4;
        border-radius: 4px 0 4px 0;
    }
  </style>
  
</head>
<body>
  <div class="container">
    <h1>jquery-autosave by <a href="http://www.tomcounsell.com">Tom Counsell</a></h1>
    <p>
      A plugin that saves input values via AJAX as the user changes them.
      Post data to your backend for constant synchronization.
      <br>
      forked from <a href="https://github.com/cfurrow/jquery.autosave.js">cfurrow/jquery.autosave.js</a>
    </p>

    <h3>How to use jquery-autosave (inline setup)</h3>
    <p>Load jquery and this plugin found at src/jquery-autosave.js</p>
      <pre>&lt;script&gt;
  $("input").autosave();
&lt;/script&gt;</pre>
    
    <div class="example" id="headertext" style="text-align: justify;" data-content="EXAMPLE 1">
      <p>Set up your input fields with the data-url attributes:</p>
    </div>
    <pre>&lt;input type="text" id="my-input" name="my-input" value=""
    data-url="/my_backend_uri" /&gt;</pre>
    

    <div class="example" id="headertext" style="text-align: justify;" data-content="EXAMPLE 2">
      <p>Override defaults with additional data-* attributes:</p>
    </div>
    <pre>&lt;input type="text" id="my-input" name="my-input" value=""
    data-url="/my_backend_uri"
    data-method="GET"
    data-event="blur,change"
    data-something_else="extra information"
    data-success="function(){alert('saved!');}" /&gt;</pre>

    <p>
      
      Done!
      <br>
      Now anytime there is a change or blur from any &lt;input&gt; element on the page, 
      the elements new value will save to the specified url.
      It will also send all other data-* attributes, as well
      as the 'name' and 'value' attributes.

      Request Parameters Sent:
      <pre> { value:"original value", id:"1", event="blur,change", name="someInput" } </pre>
    </p>
    <h3>Defining global options</h3>
    <p>
      If you have many inputs you want to autosave, and don't want to define data-attributes on each of them, you can set some global options
      like this:
      <pre> $("input").autosave({url:"/example",event:"blur,change",id:"1"}); </pre>
      That line of code is the equivalent to the above with data-* attributes defined.
    </p>

    <h3>Options</h3>
    <p>
      These options can be passed to the plugin.
    </p>
    <table class="table table-striped table-lined">
      <thead>
        <tr>
          <th>Option</th>
          <th>Type</th>
          <th class="span3">Default</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>url</td>
          <td>string</td>
          <td>null</td>
          <td>Url use to post ajax data.</td>
        </tr>
        <tr>
          <td>event</td>
          <td>string</td>
          <td>change</td>
          <td>Event that causes the plugin to send data to your url. See <a href="http://api.jquery.com/on/">jQuery.on</a> for options.</td>
        </tr>
        <tr>
          <td>data</td>
          <td>object</td>
          <td>null</td>
          <td>Object that holds all data that will be posted back to the url when the event is fired. You can set global default values to be sent here. All data-* attribute values end up here, minus "data-" (e.g. "data-id" becomes "id").</td>
        </tr>
        <tr>
          <td>success</td>
          <td>function</td>
          <td>function(data,$jqueryElement){}</td>
          <td>Callback used when data was saved successfully. The data returned from the ajax request, plus the jQuery element are passed to this method.</td>
        </tr>
        <tr>
          <td>error</td>
          <td>function</td>
          <td>function(error,$jqueryElement){}</td>
          <td>Callback used when data was not saved, or there was an error. The jQuery element is passed to this method.</td>
        </tr>
        <tr>
          <td>before</td>
          <td>function</td>
          <td>function($jqueryElement){}</td>
          <td>Callback called just before a request is sent to the server. The jQuery element is passed to this method.</td>
        </tr>
      </tbody>
    </table>


<strong>data-* attributes will override any global option set.</strong>



    <h3>Example and Demo</h3>
    <p>
      View-source on the following examples to see how they work.
    </p>
    <form action="" method="POST">
      <p>
        <input type="text" name="someInput" class="span4" data-id="1" data-url="/api/updateinput" data-event="blur" value="I fail because I have a bad url" />
        <span class="alert alert-success success hide">Success!</span>
        <span class="alert alert-danger fail hide">Fail!</span>
      </p>
      <p>
        <input type="text" name="someOtherInput" class="span4" data-id="1" data-url="" data-event="blur" value="I will succeed because my url is valid" />
        <span class="alert alert-success success hide">Success!</span>
        <span class="alert alert-danger fail hide">Fail!</span>
      </p>
      <p>
        <input type="text" name="somethingElse" class="span4" data-id="1" value="I use global options" />
        <span class="alert alert-success success hide">Success!</span>
        <span class="alert alert-danger fail hide">Fail!</span>
      </p>
      <p>
        <input type="text" name="somethingElse" class="span4" data-id="1" data-type="json" value="I use JSON dataType" />
        <span class="alert alert-success success hide">Success!</span>
        <span class="alert alert-danger fail hide">Fail!</span>
      </p>
    </form>

    <h3>Pro Tip: Works on any element!</h3>
    <p>
      Use jquery-autosave on other elements besides text inputs.
      <pre>&lt;textarea name="my-textarea" id="my-textarea"
        data-url=""
      &gt;&lt;/textarea&gt;</pre>
    </p>

    <h3>Pro Tip: Re-Post Failed Requests</h3>
    <p>
      You may decide to only autosave form values and altogether forgoe the traditional form submit.
      You'll want to catch failed requsts and alert the user or quietly try to resend the request.
      <pre></pre>
    </p>
    <p>
      Requirements:
      <pre>&lt;script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="application/javascript"&gt;&lt;/script&gt;
&lt;script src="static_files/jquery-autosave.min.js" type="application/javascript"&gt;&lt;script&gt;
&lt;/script&gt;</pre>
    </p>

  </div>
  <script type="text/javascript" charset="utf-8" src="plugins.min.js"></script>
  <script type="text/javascript" charset="utf-8" src="../src/jquery.autosave.min.js"></script>
  <script type="text/javascript" charset="utf-8">
    function successCallback(data,$jq){
      $jq.find("~.success").fadeIn();
    }
    function errorCallback(error,$jq){
      $jq.find("~.fail").fadeIn();
    }
    function beforeCallback($jq){
      console.log(this);
      $jq.siblings(".success,.fail").fadeOut();
    }

    $("input").autosave({url:"",success:successCallback,error:errorCallback,before:beforeCallback});
  </script>
</body>
</html>
